# Реализация test-store через Django REST framework


### Запуск на локальном компьютере:
- Склонируйте этот репозиторий на локальный компьютер
- Установите необходимые зависимости `pip install -r requirements.txt`
- Далее необходимо настроить переменные среды. Создайте файл `.env` в корне вашего интернет-магазина и запишите туда значения для переменных:


### Описание переменных:
| Переменная      | Описание                                                   |
| --------------- |------------------------------------------------------------|
| DATABASES_USER    | Имя пользователя БД PostgreSQL                             |
| DATABASES_PASSWORD   | Пароль пользователя БД PostgreSQL                          |
| DATABASES_HOST     | По умолчанию localhost                                     |
| DATABASES_PORT  | По умолчанию 5432                                          |
| SECRET_KEY | Django ключ                                                |
                                         

`.env` файл:
```bash
SECRET_KEY=

DATABASES_USER=
DATABASES_PASSWORD=
DATABASES_HOST=
DATABASES_PORT=
DATABASES_NAME=
```
- Установите БД PostgreSQL на ваш компьютер и импортируйте туда дамп структуры БД. Категории импортируйте командой `python manage.py loaddata products/fixtures/categories.json`. Товары командой `python manage.py loaddata products/fixtures/product.json`
- После этого, введите `python manage.py runserver` и перейдите по адресу `127.0.0.1:8000`, вы увидите уже рабочий интернет-магазин который запущен у вас на локальном компьютере.



## Структура
### Товары

Все товары доступны через `api/products/`. Конкретный товар можно получить через `api/products/<id>`:

| Url           | HTTP Метод                                                 | Результат                                      |
|---------------|------------------------------------------------------------|------------------------------------------------|
| `products`| GET| Получить все продукты                          |
| `products` | POST| Создать новый продукт (Доступно только админу) |
| `products/<id>` | GET| Получить конкретный продукт|
| `products/<id>` | PUT| Изменить продукт (Доступно только админу)|
| `products/<id>` | DELETE| Удалить продукт (Доступно только админу)|

### Отзывы

Все отзывы доступны через `api/review/`. Конкретный отзыв можно получить через `api/products/<id>`:

| Url           | HTTP Метод                                                 | Результат                                                   |
|---------------|------------------------------------------------------------|-------------------------------------------------------------|
| `review`| GET| Получить все отзывы                                         |
| `review` | POST| Создать новый отзыв (Доступно авторизованным пользователям) |
| `products/<id>` | GET| Получить конкретный отзыв                                   |
| `products/<id>` | PUT| Изменить отзыв (Доступно только автору отзыва)              |
| `products/<id>` | DELETE| Удалить отзыв (Доступно только автору отзыва)                      |

### Корзины

Корзина доступна только авторизованнм пользователям. `api/baskets/` пользователь получит только свою корзину:

| Url           | HTTP Метод                                                 | Результат                                                                                         |
|---------------|------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| `basket`| GET| Получить свою корзину (Доступно авторизованным пользователям)                                     |
| `basket` | POST| Создать новую, либо добавить товар в существующую корзину (Доступно авторизованным пользователям) |

### Заказы
Заказы доступны только авторизованнм пользователям. `api/baskets/` пользователь получит только свои заказы:

| Url      | HTTP Метод                                                 | Результат                                                    |
|----------|------------------------------------------------------------|--------------------------------------------------------------|
| `order`  | GET| Получить свои заказы (Доступно авторизованным пользователям) |
| `order` | POST| Создать новыйзаказ (Доступно авторизованным пользователям)   |
| `order/<id>` | GET| Получить конкретный заказ (только свои заказы)               |


## Создание пользователей и токенов

Создание пользователя:
```
http POST http://127.0.0.1:8000/auth/users/ 
{"email":["Обязательное поле."],"username":["Обязательное поле."],"password":["Обязательное поле."]} 
```

После регистрации необходимо получить токен:
```
http://127.0.0.1:8000/auth/token/login
{"username":["Обязательное поле."],"password":["Обязательное поле."]}
```

### Пагинация
Поддерживает пагинация:
```
http://127.0.0.1:8000/api/products/?page=1 
http://127.0.0.1:8000/api/products/?page=2
```

### Фильтрация
Поддерживается фильтрация:
```
http://127.0.0.1:8000/api/products/?brand=Apple
http://127.0.0.1:8000/api/products/?brand=Apple&category=Смартфоны
http://127.0.0.1:8000/api/products/?price_now_min=1000&price_now_max=10000
```


